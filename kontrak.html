<!DOCTYPE html>
<html lang="ms">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>M&E-Connect v1.0</title>
    <link href="https://fonts.googleapis.com/css2?family=SF+Pro+Display:wght@300;400;600&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        :root {
            --bg-color: #f2f2f7;
            --bg-gradient: linear-gradient(120deg, #a1c4fd 0%, #c2e9fb 100%);
            --glass-white: rgba(255, 255, 255, 0.7);
            --glass-border: rgba(255, 255, 255, 0.8);
            --text-primary: #1c1c1e;
            --text-secondary: #8e8e93;
            --ios-blue: #007AFF;
            --ios-red: #FF3B30;
        }
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; font-family: 'SF Pro Display', sans-serif; }
        body { margin: 0; background: var(--bg-color) var(--bg-gradient) fixed; display: flex; justify-content: center; height: 100dvh; overflow: hidden; }
        .container { width: 100%; max-width: 420px; height: 100dvh; display: flex; flex-direction: column; }
        .page { display: none; height: 100%; overflow-y: auto; padding: 20px; flex-direction: column; -webkit-overflow-scrolling: touch; }
        .page.active { display: flex; animation: fadeIn 0.3s ease; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        /* UI Components */
        .glass-card { background: var(--glass-white); backdrop-filter: blur(20px); border: 1px solid var(--glass-border); border-radius: 24px; padding: 20px; margin-bottom: 15px; box-shadow: 0 8px 32px rgba(0,0,0,0.05); }
        .menu-item { background: white; border-radius: 20px; padding: 18px; display: flex; align-items: center; gap: 15px; margin-bottom: 12px; cursor: pointer; border: 1px solid rgba(0,0,0,0.05); }
        .menu-icon { width: 40px; height: 40px; border-radius: 10px; display: flex; justify-content: center; align-items: center; color: white; }
        
        /* Contract List UI */
        .section-header { background: #1c1c1e; color: white; padding: 10px 15px; border-radius: 12px; margin-top: 20px; font-weight: 600; font-size: 13px; text-transform: uppercase; }
        .unit-label { margin: 12px 0 8px 5px; font-size: 13px; font-weight: 700; color: var(--ios-blue); }
        .contract-card { background: white; border-radius: 20px; padding: 15px; margin-bottom: 10px; border: 1px solid rgba(0,0,0,0.05); position: relative; }
        .delete-btn { position: absolute; top: 15px; right: 15px; color: var(--ios-red); opacity: 0.5; }
        
        /* Form Styling */
        label { font-size: 11px; font-weight: 600; color: var(--text-secondary); margin: 10px 0 5px; display: block; }
        input, select, textarea { width: 100%; padding: 12px; border-radius: 12px; border: 1px solid #ddd; background: rgba(255,255,255,0.8); font-size: 15px; margin-bottom: 8px; outline: none; }
        button { width: 100%; padding: 16px; background: var(--ios-blue); color: white; border: none; border-radius: 16px; font-weight: 600; cursor: pointer; margin-top: 10px; }
        
        /* Breakdown Cost UI */
        .breakdown-item { display: flex; justify-content: space-between; font-size: 11px; padding: 4px 0; border-bottom: 1px dashed #eee; }
        .breakdown-container { background: #f9f9f9; padding: 10px; border-radius: 12px; margin: 8px 0; }
    </style>
</head>
<body>

<div class="container">
    <div id="homePage" class="page active">
        <div style="text-align:center; margin: 20px 0 30px;">
            <h1 style="margin:0; font-size:26px; letter-spacing:-1px;">M&E-Connect</h1>
            <p style="color:var(--text-secondary); font-size:12px;">Tanpa Skema Public (Direct API)</p>
        </div>
        <div class="menu-item" onclick="showPage('kontrakPage')">
            <div class="menu-icon" style="background:#34C759;"><i class="fa-solid fa-folder-tree"></i></div>
            <div><h4 style="margin:0">Direktori Kontrak</h4><p style="margin:0; font-size:11px; color:var(--text-secondary)">Pecahan Seksyen & Unit</p></div>
        </div>
        <div class="menu-item" onclick="showPage('adminPage')">
            <div class="menu-icon" style="background:#007AFF;"><i class="fa-solid fa-plus"></i></div>
            <div><h4 style="margin:0">Pendaftaran</h4><p style="margin:0; font-size:11px; color:var(--text-secondary)">Tambah Unit & Kontrak</p></div>
        </div>
    </div>

    <div id="kontrakPage" class="page">
        <div class="glass-card">
            <div onclick="showPage('homePage')" style="color:var(--ios-blue); cursor:pointer; font-weight:600; margin-bottom:15px;"><i class="fa-solid fa-arrow-left"></i> KEMBALI</div>
            <h2 style="margin:0 0 15px 0;">Senarai Kontrak</h2>
            <input type="text" placeholder="Cari kontrak/vendor..." onkeyup="searchData(this.value)">
            <div id="kontrakList"></div>
        </div>
    </div>

    <div id="adminPage" class="page">
        <div class="glass-card">
            <div onclick="showPage('homePage')" style="color:var(--ios-blue); cursor:pointer; font-weight:600; margin-bottom:15px;"><i class="fa-solid fa-arrow-left"></i> KEMBALI</div>
            
            <div style="background:rgba(0,0,0,0.03); padding:15px; border-radius:15px; margin-bottom:20px;">
                <h4 style="margin-top:0">Daftar Unit</h4>
                <label>Seksyen</label>
                <select id="reg_sec_id">
                    <option value="1">Seksyen Selenggara</option>
                    <option value="2">Seksyen Pematuhan Peraturan</option>
                    <option value="3">Seksyen Pengurusan Aset & Kew
